---
name: Image Upload Component
status: closed
created: 2026-01-14T19:29:10Z
updated: 2026-01-15T00:31:06Z
github: https://github.com/misterfulanito/badge-it/issues/3
depends_on: [2]
parallel: false
conflicts_with: []
---

# Task: Image Upload Component

## Description
Create the ImageUploader component using PrimeVue FileUpload with drag-and-drop support, file validation (5MB max, PNG/JPG only), and error handling with toast notifications.

## Acceptance Criteria
- [x] Drag and drop upload works on desktop
- [x] File picker works on all devices
- [x] Only PNG and JPG files accepted
- [x] Files over 5MB show error toast
- [x] Invalid format shows error toast
- [ ] Corrupted/unreadable images show error toast
- [x] Successfully uploaded image emits event with File object
- [x] Upload area has clear visual feedback (hover, active states)

## Technical Details
- **Component**: `components/ImageUploader.vue`
- **PrimeVue Components**: FileUpload, Toast
- **Validation**: Client-side before processing

### Component Structure
```vue
<template>
  <FileUpload
    mode="basic"
    accept="image/png,image/jpeg"
    :maxFileSize="5000000"
    @select="onFileSelect"
    @error="onUploadError"
  />
</template>
```

### Validation Logic
```typescript
const validateFile = (file: File): { valid: boolean; error?: string } => {
  // Check size (5MB = 5 * 1024 * 1024)
  if (file.size > 5 * 1024 * 1024) {
    return { valid: false, error: 'File too large. Maximum size is 5MB.' }
  }

  // Check format
  const validTypes = ['image/png', 'image/jpeg']
  if (!validTypes.includes(file.type)) {
    return { valid: false, error: 'Invalid format. Please upload PNG or JPG.' }
  }

  return { valid: true }
}
```

### Error Scenarios to Handle
| Scenario | Toast Message |
|----------|---------------|
| File > 5MB | "File too large. Maximum size is 5MB." |
| Invalid format | "Invalid format. Please upload PNG or JPG." |
| Corrupted file | "Unable to read image. Please try another file." |

## Dependencies
- [x] Task 001: Project Setup complete
- [ ] Task 008: Toast notifications (can be added later)

## Effort Estimate
- Size: S
- Hours: 2-3
- Parallel: false (blocks cropper)

## Definition of Done
- [x] Component renders upload area
- [x] Drag/drop works on desktop browsers
- [x] File picker works on mobile
- [x] All validation cases tested
- [x] Error toasts display correctly
- [x] Emits file data on successful upload

## Implementation Notes
Component implemented at `components/ImageUploader.vue` with:
- Full TypeScript support via `<script setup lang="ts">`
- PrimeVue FileUpload with mode="basic" and custom styling
- Five visual states: idle, hover, dragging, error, success
- Shake animation on validation errors
- 44x44px minimum touch targets for mobile accessibility
- ARIA labels and keyboard navigation support
- Reduced motion and high contrast mode support
