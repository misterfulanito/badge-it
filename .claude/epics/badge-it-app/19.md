---
name: Merge Upload and Crop Steps
status: open
created: 2026-01-15T22:49:51Z
updated: 2026-01-15T22:49:51Z
github: null
depends_on: [21]
parallel: false
conflicts_with: []
---

# Task: Merge Upload and Crop Steps

## Description
Combine the Upload and Crop steps into a single unified step. The new layout shows a dotted-line upload box that transforms into the cropper when an image is loaded. Zoom slider and controls are visible but disabled until image loads.

## Acceptance Criteria
- [ ] Single step for upload + crop (was 2 separate steps)
- [ ] App now has 3 steps: Upload & Crop → Badge → Preview
- [ ] Dotted box for upload area
- [ ] Zoom slider visible but disabled until image loads
- [ ] Crop controls visible but disabled until image loads
- [ ] Smooth transition from upload to crop mode
- [ ] Best image resolution maintained at all times

## Technical Details

### New Step Flow
```
Step 1: Upload & Crop (combined)
  ├── Initial state: Dotted upload box + disabled controls
  └── After upload: Cropper active + enabled controls

Step 2: Badge Selection
  └── Two-column layout with preview and options

Step 3: Preview & Download
  └── Final preview with download button
```

### Layout Structure
```
┌─────────────────────────────────────────────────────┐
│  ┌─────────────────────────────────────────────┐    │
│  │                                             │    │
│  │   [Dotted Upload Box / Cropper Area]        │    │
│  │                                             │    │
│  └─────────────────────────────────────────────┘    │
│                                                     │
│  ┌─────────────────────────────────────────────┐    │
│  │  [-] ━━━━━━━━●━━━━━━━━ [+]  (disabled)      │    │
│  │      50%    100%    200%                    │    │
│  └─────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────┘
```

### State Management
```typescript
type AppStep = 'upload-crop' | 'badge' | 'preview'

// Within upload-crop step
const hasImage = computed(() => !!imageDataUrl.value)
const canProceed = computed(() => !!croppedCanvas.value)
```

### Image Resolution
- Maintain original image resolution during cropping
- Only scale for display, not for processing
- Export at 1024x1024 for final output

## Dependencies
- Task 21: Replace crop library (should be done first)

## Effort Estimate
- Size: L
- Hours: 4-5
